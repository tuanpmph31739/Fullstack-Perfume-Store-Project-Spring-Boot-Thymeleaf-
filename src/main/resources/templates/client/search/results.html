<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="client/fragments/head :: head">
    <title th:text="'Kết quả tìm kiếm: ' + ${keyword} + ' | FPerfume'">Kết quả tìm kiếm</title>
</head>
<body>
<div th:replace="client/fragments/header :: header"></div>

<main class="container pd-wrap my-4">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-3">
        <ol class="breadcrumb small">
            <li class="breadcrumb-item"><a th:href="@{/}">Trang chủ</a></li>
            <li class="breadcrumb-item active" aria-current="page">
                Kết quả tìm kiếm
            </li>
        </ol>
    </nav>

    <h4 class="mb-3">
        Kết quả cho: "<span th:text="${keyword}">keyword</span>"
    </h4>

    <p class="text-muted small mb-3">
        Tìm thấy
        <strong th:text="${pageData.totalElements}">0</strong>
        sản phẩm.
    </p>

    <!-- Nếu không có sản phẩm -->
    <div th:if="${pageData.totalElements == 0}" class="alert alert-info">
        Không tìm thấy sản phẩm phù hợp. Hãy thử từ khóa khác.
    </div>

    <!-- Danh sách sản phẩm -->
    <div class="row g-3" th:if="${pageData.totalElements > 0}">
        <div class="col-6 col-md-3"
             th:each="sp : ${pageData.content}">
            <div class="card h-100 border-0 shadow-sm product-card">
                <a th:href="@{/san-pham/{id}(id=${sp.id})}"
                   class="text-decoration-none text-dark d-flex flex-column h-100">
                    <div class="ratio ratio-1x1">
                        <img th:src="@{'/images/uploads/' + ${sp.hinhAnh}}"
                             th:alt="${sp.tenSanPham}"
                             class="card-img-top object-fit-cover">
                    </div>
                    <div class="card-body p-2" style="text-align: center">
                        <h6 class="mb-1 text-truncate"
                            th:text="${sp.tenSanPham}">Tên sản phẩm</h6>
                        <div class="small text-muted text-truncate"
                             th:text="${sp.tenThuongHieu}">Thương hiệu</div>
                        <div class="fw-semibold mt-1" style="color: #A68A79FF"
                             th:text="${#numbers.formatDecimal(sp.giaBan, 0, 'POINT', 0, 'NONE')} + ' ₫'">
                            0 ₫
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <!-- Phân trang -->
    <nav th:if="${totalPages > 1}" class="mt-4">
        <ul class="pagination justify-content-center">
            <li class="page-item"
                th:classappend="${currentPage == 1} ? ' disabled'">
                <a class="page-link"
                   th:href="@{/search(keyword=${keyword}, page=${currentPage - 1})}">
                    «
                </a>
            </li>

            <li class="page-item"
                th:each="pageNum : ${#numbers.sequence(1, totalPages)}"
                th:classappend="${pageNum == currentPage} ? ' active'">
                <a class="page-link"
                   th:text="${pageNum}"
                   th:href="@{/search(keyword=${keyword}, page=${pageNum})}">1</a>
            </li>

            <li class="page-item"
                th:classappend="${currentPage == totalPages} ? ' disabled'">
                <a class="page-link"
                   th:href="@{/search(keyword=${keyword}, page=${currentPage + 1})}">
                    »
                </a>
            </li>
        </ul>
    </nav>
</main>

<div th:replace="client/fragments/footer :: footer"></div>
</body>
</html>
