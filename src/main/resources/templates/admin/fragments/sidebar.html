<div id="sidebar" class="sidebar-desktop" th:fragment="sidebar" xmlns:th="http://www.thymeleaf.org">
    <style>
        body, #sidebar, .sidebar-menu, .menu, .sidebar-link {
            font-family: 'Roboto', 'Segoe UI', sans-serif !important;
        }
    </style>
    <div class="sidebar-wrapper ps ps--active-y">
        <div class="sidebar-header position-relative d-flex justify-content-between align-items-center">
            <a th:href="@{/admin}">
                <img th:src="@{/admin/assets/static/images/logo/logofperfume.png}" style="width:50%; height:50%;" alt="Logo">
            </a>
            <div class="theme-toggle d-flex gap-2 align-items-center mt-2">
                <div class="form-check form-switch fs-6">
                    <input class="form-check-input me-0" type="checkbox" id="toggle-dark" style="cursor: pointer">
                </div>
            </div>
            <div class="sidebar-toggler x">
                <a href="#" class="sidebar-hide d-xl-none d-block"><i class="bi bi-x bi-middle"></i></a>
            </div>
        </div>

        <div class="sidebar-menu">
            <ul class="menu">
                <li class="sidebar-title">Menu</li>

                <li class="sidebar-item" th:classappend="${currentPath == '/admin'} ? 'active'">
                    <a th:href="@{/admin}" class="sidebar-link">
                        <i class="bi bi-grid-fill"></i>
                        <span>Thống kê</span>
                    </a>
                </li>

                <hr style="border: none; border-top: 3px dashed #090a0b;width: 80%; margin: 20px auto;">

                <li class="sidebar-item has-sub"
                    th:classappend="${
                        #strings.startsWith(currentPath, '/admin/san-pham') or
                        #strings.startsWith(currentPath, '/admin/thuong-hieu') or
                        #strings.startsWith(currentPath, '/admin/xuat-xu') or
                        #strings.startsWith(currentPath, '/admin/dung-tich') or
                        #strings.startsWith(currentPath, '/admin/nong-do') or
                        #strings.startsWith(currentPath, '/admin/loai-nuoc-hoa') or
                        #strings.startsWith(currentPath, '/admin/mua-thich-hop') or
                        #strings.startsWith(currentPath, '/admin/nhom-huong')
                    } ? 'active'">
                    <a href="#" class="sidebar-link">
                        <i class="bi bi-basket"></i>
                        <span>Quản lý sản phẩm</span>
                    </a>

                    <ul class="submenu">
                        <li class="submenu-item" th:classappend="${currentPath == '/admin/san-pham'} ? 'active'">
                            <a th:href="@{/admin/san-pham}">Dòng sản phẩm</a>
                        </li>
                        <li class="submenu-item" th:classappend="${currentPath == '/admin/san-pham-chi-tiet'} ? 'active'">
                            <a th:href="@{/admin/san-pham-chi-tiet}">Sản phẩm chi tiết</a>
                        </li>
                        <li class="submenu-item" th:classappend="${currentPath == '/admin/thuong-hieu'} ? 'active'">
                            <a th:href="@{/admin/thuong-hieu}">Thương hiệu</a>
                        </li>
                        <li class="submenu-item" th:classappend="${currentPath == '/admin/xuat-xu'} ? 'active'">
                            <a th:href="@{/admin/xuat-xu}">Xuất xứ</a>
                        </li>
                        <li class="submenu-item" th:classappend="${currentPath == '/admin/dung-tich'} ? 'active'">
                            <a th:href="@{/admin/dung-tich}">Dung tích</a>
                        </li>
                        <li class="submenu-item" th:classappend="${currentPath == '/admin/nong-do'} ? 'active'">
                            <a th:href="@{/admin/nong-do}">Nồng độ</a>
                        </li>
                        <li class="submenu-item" th:classappend="${currentPath == '/admin/loai-nuoc-hoa'} ? 'active'">
                            <a th:href="@{/admin/loai-nuoc-hoa}">Loại nước hoa</a>
                        </li>
                        <li class="submenu-item" th:classappend="${currentPath == '/admin/nhom-huong'} ? 'active'">
                            <a th:href="@{/admin/nhom-huong}">Nhóm hương</a>
                        </li>
                        <li class="submenu-item" th:classappend="${currentPath == '/admin/mua-thich-hop'} ? 'active'">
                            <a th:href="@{/admin/mua-thich-hop}">Mùa thích hợp</a>
                        </li>
                    </ul>
                </li>

                <li class="sidebar-item" th:classappend="${currentPath == '/admin/nguoi-dung'} ? 'active'">
                    <a th:href="@{/admin/nguoi-dung}" class="sidebar-link">
                        <i class="bi bi-people"></i>
                        <span>Quản lý người dùng</span>
                    </a>
                </li>

                <li class="sidebar-item" th:classappend="${currentPath == '/admin/hoa-don'} ? 'active'">
                    <a th:href="@{/admin/hoa-don}" class="sidebar-link">
                        <i class="bi bi-receipt"></i>
                        <span>Quản lý hóa đơn</span>
                    </a>
                </li>

                <li class="sidebar-item" th:classappend="${currentPath == '/admin/giam-gia'} ? 'active'">
                    <a th:href="@{/admin/giam-gia}" class="sidebar-link">
                        <i class="bi bi-tags"></i>
                        <span>Chương trình giảm giá</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const sidebar = document.getElementById('sidebar');
        const hideBtn = document.querySelector('.sidebar-hide');

        if (localStorage.getItem('sidebar-active') === 'false') {
            sidebar.classList.remove('active');
        } else {
            sidebar.classList.add('active');
        }

        if (hideBtn) {
            hideBtn.addEventListener('click', function (e) {
                e.preventDefault();
                sidebar.classList.toggle('active');
                localStorage.setItem('sidebar-active', sidebar.classList.contains('active'));
            });
        }
    });
</script>
