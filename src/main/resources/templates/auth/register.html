<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Đăng ký tài khoản</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body { font-family: "Segoe UI", sans-serif; background: linear-gradient(135deg,#81ecec,#74b9ff); height:100vh; display:flex; justify-content:center; align-items:center; }
        .register-container { background:white; padding:40px 50px; border-radius:15px; box-shadow:0 10px 25px rgba(0,0,0,0.1); width:420px; }
        h2 { text-align:center; color:#2d3436; margin-bottom:25px; }
        label { font-weight:500; color:#333; }
        input { width:100%; padding:12px; margin:8px 0 16px; border:1px solid #ccc; border-radius:8px; font-size:15px; }
        input:focus { border-color:#00cec9; }
        button { width:100%; background:#00cec9; color:white; border:none; padding:12px; border-radius:8px; font-size:16px; cursor:pointer; transition:0.3s; }
        button:hover { background:#81ecec; color:#2d3436; }
    </style>
</head>
<body>
<div class="register-container">
    <h2>Tạo tài khoản mới</h2>
    <form id="registerForm" th:action="@{/register}" th:object="${nguoiDung}" method="post" onsubmit="return validateForm()">
        <label>Họ tên</label>
        <input type="text" id="hoTen" th:field="*{hoTen}" placeholder="Nhập họ tên">

        <label>Email</label>
        <input type="email" id="email" th:field="*{email}" placeholder="Nhập email">

        <label>Mật khẩu</label>
        <input type="password" id="matKhau" th:field="*{matKhau}" placeholder="Nhập mật khẩu">

        <button type="submit">Đăng ký</button>
    </form>
</div>

<script th:inline="javascript">
    const error = /*[[${error}]]*/ null;
    const success = /*[[${success}]]*/ null;

    if (error) {
        Swal.fire({ icon:'error', title:'Lỗi', text:error });
    } else if (success) {
        Swal.fire({ icon:'success', title:'Thành công', text:success });
    }

    function validateForm() {
        const hoTen = document.getElementById('hoTen').value.trim();
        const email = document.getElementById('email').value.trim();
        const matKhau = document.getElementById('matKhau').value.trim();

        if (hoTen.length < 3) {
            Swal.fire({ icon:'error', title:'Lỗi', text:'Họ tên phải từ 3 ký tự trở lên' });
            return false;
        }

        const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/;
        if(!emailPattern.test(email)) {
            Swal.fire({ icon:'error', title:'Lỗi', text:'Email không hợp lệ' });
            return false;
        }

        if(matKhau.length < 6) {
            Swal.fire({ icon:'error', title:'Lỗi', text:'Mật khẩu phải từ 6 ký tự trở lên' });
            return false;
        }

        return true;
    }
</script>
</body>
</html>
